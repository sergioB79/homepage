<!doctype html>
<!--
---
title: "KaleidoLab ‚Äî Manual do Utilizador"
categoria: dev
subcategoria: webgl
status: published
date: 2025-11-10
tags: ["#creative-coding", "#webgl", "#shaders", "#fractal", "#kaleidoscope", "#frontend"]
---
-->
<html lang="pt-PT">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="title" content="KaleidoLab ‚Äî Manual do Utilizador">
  <meta name="description" content="Guia completo do KaleidoLab: o gerador WebGL de caleidosc√≥pios e fractais. Explica todos os controlos, truques de exporta√ß√£o e resolu√ß√£o de problemas.">
  <meta name="categoria" content="dev">
  <meta name="subcategoria" content="webgl">
  <meta name="status" content="published">
  <meta name="date" content="2025-11-10">
  <meta name="tags" content="#creative-coding, #webgl, #shaders, #fractal, #kaleidoscope, #frontend">
  <style>
    :root{--fg:#111827;--muted:#6b7280;--line:#e5e7eb;--bg:#fff;--accent:#11182710}
    body{font:16px/1.7 system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg);margin:0;padding:32px}
    main{max-width:900px;margin:auto}
    h1{font-size:clamp(28px,4vw,40px);line-height:1.1;margin:.2em 0}
    h2{margin-top:2.2em}
    h3{margin-top:1.4em}
    p.lead{color:#374151;font-size:1.05rem}
    code,kbd{background:#f3f4f6;border:1px solid #e5e7eb;border-radius:6px;padding:.1em .35em;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    pre{background:#0b0f13;color:#e5e7eb;border-radius:12px;padding:16px;overflow:auto;border:1px solid #11182733}
    .note{background:#f8fafc;border-left:4px solid #11182722;padding:12px 14px;border-radius:8px}
    .grid{display:grid;gap:12px}
    .grid.cols-2{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    ul{margin: .5em 0 .5em 1.25em}
    li{margin:.2em 0}
    table{width:100%;border-collapse:collapse;margin:12px 0}
    th,td{border:1px solid var(--line);padding:8px 10px;text-align:left}
    .kbd{font-weight:600}
  </style>
</head>
<body>
<main>

<h1>KaleidoLab ‚Äî Manual do Utilizador</h1>
<p class="lead">
O <strong>KaleidoLab</strong> √© um gerador em tempo real de padr√µes caleidosc√≥picos e fractais, feito em WebGL. Este manual explica cada controlo, como exportar imagens e anima√ß√µes, e como resolver os problemas mais comuns.
</p>

<div class="note">
<strong>Resumo r√°pido:</strong> ajusta os <em>Segments</em> e <em>Mirror</em> para o efeito caleidosc√≥pico; usa os <em>Fractal sliders</em> (Octaves, Lacunarity, Gain, Warp, Seed) para o detalhe; escolhe uma <em>Palette</em> e faz <em>Download PNG</em> ou <em>Export Animation</em>.
</div>

<h2>1) Como funciona (por dentro, em 30s)</h2>
<ul>
  <li>Um <em>fragment shader</em> desenha a imagem inteira no GPU, por frame.</li>
  <li>As coordenadas polares s√£o ‚Äúdobradas‚Äù por segmentos (simetria do caleidosc√≥pio).</li>
  <li>O detalhe vem de <em>fBm (fractal Brownian motion)</em>, controlada por <em>octaves</em>, <em>lacunarity</em>, <em>gain</em> e <em>warp</em>.</li>
  <li>A cor √© mapeada por <em>palettes</em> e ajustada com <em>contrast</em>, <em>saturation</em> e <em>brightness</em>.</li>
</ul>

<h2>2) Painel de Controlo</h2>

<h3>Canvas</h3>
<div class="grid cols-2">
  <div>
    <ul>
      <li><strong>Width / Height</strong> ‚Äî Define o tamanho (em p√≠xeis) da exporta√ß√£o PNG/v√≠deo.</li>
      <li><strong>Apply Size</strong> ‚Äî Aplica o tamanho exato inserido.</li>
      <li><strong>Fit Window</strong> ‚Äî Ajusta ao tamanho vis√≠vel (√≥timo para explorar).</li>
    </ul>
  </div>
  <div class="note">Sugest√£o: explora com <em>Fit Window</em>; antes de exportar, usa <em>Width/Height</em> com o tamanho final pretendido.</div>
</div>

<h3>Symmetry & Motion</h3>
<ul>
  <li><strong>Segments</strong> ‚Äî N√∫mero de fatias da simetria radial. Mais segmentos = padr√µes mais complexos.</li>
  <li><strong>Mirror</strong> ‚Äî Ativa/desativa espelhamento dentro de cada segmento.</li>
  <li><strong>Rotation</strong> ‚Äî Velocidade de rota√ß√£o angular do padr√£o (pode ser negativa).</li>
  <li><strong>Zoom</strong> ‚Äî Aproxima/afasta o dom√≠nio fractal.</li>
  <li><strong>Animate</strong> ‚Äî Liga/desliga anima√ß√£o no tempo.</li>
  <li><strong>Time Speed</strong> ‚Äî Escala a velocidade do tempo (0 = est√°tico).</li>
</ul>

<h3>Fractal (fBm)</h3>
<ul>
  <li><strong>Octaves</strong> ‚Äî Quantas camadas de ru√≠do se somam. Mais octaves = mais detalhe (custo ‚Üë).</li>
  <li><strong>Lacunarity</strong> ‚Äî Fator de aumento de frequ√™ncia entre octaves (estrutura).</li>
  <li><strong>Gain</strong> ‚Äî Quanta intensidade cada octave seguinte adiciona (contraste do detalhe).</li>
  <li><strong>Warp</strong> ‚Äî Distor√ß√£o do espa√ßo (domain warping). Valores altos produzem remoinhos/fluxos.</li>
  <li><strong>Seed</strong> ‚Äî ‚ÄúAleatoriedade‚Äù reprodut√≠vel do padr√£o.</li>
</ul>

<h3>Palette</h3>
<ul>
  <li><strong>Palette</strong> ‚Äî Aurora, Magma, Ocean, Neon, Pastel.</li>
  <li><strong>Contrast</strong> ‚Äî Aumenta/diminui o contraste global.</li>
  <li><strong>Saturation</strong> ‚Äî Mais/menos satura√ß√£o de cor.</li>
  <li><strong>Brightness</strong> ‚Äî Luminosidade final.</li>
  <li><strong>üé≤ (Shuffle)</strong> ‚Äî Aleatoriza um conjunto agrad√°vel de par√¢metros.</li>
</ul>

<h3>Output</h3>
<ul>
  <li><strong>Download PNG</strong> ‚Äî Exporta uma imagem com o <em>tamanho atual do canvas</em>.</li>
  <li><strong>Pause</strong> ‚Äî Pausa/resume o desenho (√∫til para congelar um momento).</li>
  <li><strong>Duration (s)</strong> ‚Äî Dura√ß√£o da anima√ß√£o a exportar.</li>
  <li><strong>FPS</strong> ‚Äî Frames por segundo do v√≠deo.</li>
  <li><strong>Format</strong> ‚Äî Formato do v√≠deo (WebM/VP9, VP8 ou Auto). O browser escolhe o que suporta.</li>
  <li><strong>Export Animation</strong> ‚Äî Grava a anima√ß√£o do canvas e descarrega um <code>.webm</code>.</li>
</ul>

<h3>Presets & Reset</h3>
<ul>
  <li><strong>Preset: Soft</strong> ‚Äî Tons suaves, detalhe moderado, mais ‚Äúzen‚Äù.</li>
  <li><strong>Preset: Vivid</strong> ‚Äî Cores vivas, contraste mais forte, mais movimento.</li>
  <li><strong>Reset</strong> ‚Äî Rep√µe valores padr√£o sem quebrar os controlos.</li>
</ul>

<h2>3) Exporta√ß√£o ‚Äî boas pr√°ticas</h2>

<h3>Imagens (PNG)</h3>
<ol>
  <li>Escolhe o aspeto final e clica <strong>Fit Window</strong> para explorar.</li>
  <li>Antes de exportar: define <strong>Width/Height</strong> com o tamanho final (ex.: 3840√ó2160).</li>
  <li>Clica <strong>Download PNG</strong>. Se o browser queimar a ‚Äúdrawing buffer‚Äù, a app j√° preserva o frame.</li>
</ol>

<h3>V√≠deo (WebM)</h3>
<ol>
  <li>Define <strong>Duration</strong> e <strong>FPS</strong> (ex.: 8s a 30 fps).</li>
  <li>Deixa <strong>Animate</strong> ligado. O export for√ßa a anima√ß√£o enquanto grava.</li>
  <li>Carrega em <strong>Export Animation</strong>. O bot√£o mostra <em>Recording‚Ä¶</em> e descarrega <code>.webm</code>.</li>
</ol>
<p>
Queres MP4/H.264? Converte o <code>.webm</code> com o HandBrake/FFmpeg:
</p>
<pre>ffmpeg -i kaleidolab_8s_30fps.webm -c:v libx264 -pix_fmt yuv420p -crf 18 -preset slow kaleidolab.mp4</pre>

<h2>4) Performance e qualidade</h2>
<ul>
  <li><strong>Octaves</strong> elevadas + <strong>Warp</strong> alto = custo maior. Sobe FPS reduzindo <em>Octaves</em> ou <em>Lacunarity/Gain</em>.</li>
  <li><strong>Segments</strong> muito alto pode exigir GPU melhor. Ajusta por tentativa/erro.</li>
  <li>Para <strong>still frames</strong> enormes (8K+), define o tamanho, pausa a anima√ß√£o e exporta o PNG.</li>
</ul>

<h2>5) Resolu√ß√£o de Problemas</h2>
<table>
  <thead><tr><th>Problema</th><th>Causa prov√°vel</th><th>Solu√ß√£o</th></tr></thead>
  <tbody>
    <tr>
      <td>PNG sai preto</td>
      <td>WebGL limpa o buffer antes do snapshot</td>
      <td>J√° est√° com <em>preserveDrawingBuffer</em>; tenta clicar de novo ou exportar com a anima√ß√£o em pausa</td>
    </tr>
    <tr>
      <td>Export Animation n√£o descarrega</td>
      <td>Browser sem <code>MediaRecorder</code> ou sem codec suportado</td>
      <td>Usa Chrome/Edge/Firefox recentes ou exporta PNGs e converte em v√≠deo</td>
    </tr>
    <tr>
      <td>Canvas preto</td>
      <td>GPU/driver bloqueou WebGL ou shader n√£o compilou</td>
      <td>Recarrega a p√°gina; testa noutro browser; reduz par√¢metros (Segments / Octaves)</td>
    </tr>
    <tr>
      <td>Bot√µes n√£o respondem</td>
      <td>Algum erro JavaScript</td>
      <td>Abre a consola (F12) e reporta a mensagem para corre√ß√£o</td>
    </tr>
  </tbody>
</table>

<h2>6) Dicas r√°pidas</h2>
<ul>
  <li><strong>Seed</strong> d√°-te varia√ß√µes infinitas mantendo ‚Äúo estilo‚Äù.</li>
  <li><strong>Rotation</strong> muito baixo + <strong>Time Speed</strong> suave ‚Üí v√≠deos hipn√≥ticos.</li>
  <li><strong>Contrast</strong> & <strong>Saturation</strong> afinam o look para impress√£o ou ecr√£.</li>
  <li>Guarda combos preferidos tirando notas dos valores (em breve: presets com JSON).</li>
</ul>
 </p>
 </p>

 <p>
        S√©rgio Batalha<br />
        Rede interativa de categorias, notas e tags<br />
        <a href="https://sergiob79.github.io/homepage/">https://sergiob79.github.io/homepage/</a>
 </p>

</main>
</body>
</html>
